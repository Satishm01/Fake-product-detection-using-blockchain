{"ast":null,"code":"import React,{useState,useRef}from'react';// import { Html5QrcodeScanner } from 'html5-qrcode';\n// import { useEffect } from 'react';\n// import QRCode from \"qrcode\";\nimport QrScanner from'qr-scanner';// import QrReader from 'react-qr-reader';\n// import  { Component } from 'react';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerifyProduct=_ref=>{let{provider,central}=_ref;const[companyContractAddress,setCompanyContractAddress]=useState('');const[productId,setProductId]=useState('');const[productStatus,setProductStatus]=useState(null);// const [showPopup, setShowPopup] = useState(false);\n//const [scannedData, setScannedData] = useState(null);\n// const handleScan = (data) => {\n//     setScannedData(data);\n// }\nfunction showErrorMessage(error){alert(\"An error occurred while connecting to MetaMask: \".concat(error.message));}const handleInput1Change=e=>{setCompanyContractAddress(e.target.value);};const handleInput2Change=e=>{setProductId(e.target.value);};const checkProduct=async()=>{try{debugger;const result=await central.checkProduct(companyContractAddress,parseInt(productId));console.log(\"result\",result);setProductStatus(result);}catch(error){console.log(error);showErrorMessage(error);}};const[file,setFile]=useState(null);const[data,setData]=useState(null);const fileRef=useRef();const handleClick=()=>{fileRef.current.click();};const handleChange=async e=>{debugger;const file=e.target.files[0];console.log(\"file\",file);debugger;setFile(file);const result=await QrScanner.scanImage(file);setData(result);};// const showCounterfeitPopup = () => {\n//     alert('The scanned product is counterfeit.');\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"VerifyProduct\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Component__title\",children:\"Verify Product\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Component__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Company contract address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:companyContractAddress,onChange:handleInput1Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Product id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:productId,onChange:handleInput2Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\" Scan Your QR Code\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card border-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClick,className:\"btn btn-success\",children:\"Scan QRCode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileRef,onChange:handleChange,accept:\".png, .jpg, .jpeg\",className:\"d-none\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[file&&/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"QR Code\"}),data&&/*#__PURE__*/_jsxs(\"p\",{className:\"small mt-5\",children:[\"data: \",data]})]})]})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button__toggle form__button\",onClick:checkProduct,children:\"Verify\"}),productStatus&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Result: \",productStatus]})]})]});};//Extra\n// class QrContainer extends Component {\n//     constructor(props){\n//         super(props)\n//         this.state = {\n//             result: 'Hold QR Code Steady and Clear to scan',\n//         }\n//         this.handleScan = this.handleScan.bind(this)\n//     }\n//     handleScan(result){\n//         this.setState({\n//             result: \"data\"\n//         })\n//     }\n//     handleError(err){\n//         console.error(err)\n//     }\n//     render(){\n//         const previewStyle = {\n//             height: 200,\n//             width: 200,\n//             display: 'flex',\n//             \"justify-content\": \"center\"\n//         }\n//         const camStyle = {\n//             display: 'flex',\n//             justifyContent: \"center\",\n//             marginTop: '-50px'\n//         }\n//         const textStyle = {\n//             fontSize: '30px',\n//             \"text-align\": 'center',\n//             marginTop: '-50px'\n//         }\n//         return(\n//             <React.Fragment>\n//                 <div style={camStyle}>\n//                     <QrReader\n//                         delay={100}\n//                         style={previewStyle}\n//                         onError={this.handleError}\n//                         onScan={this.handleScan}\n//                         />\n//                 </div>\n//                 <p style={textStyle}>\n//                     {this.state.result}\n//                 </p>\n//             </React.Fragment>\n//         )\n//     }\n// }\nexport default VerifyProduct;","map":{"version":3,"names":["React","useState","useRef","QrScanner","jsx","_jsx","jsxs","_jsxs","VerifyProduct","_ref","provider","central","companyContractAddress","setCompanyContractAddress","productId","setProductId","productStatus","setProductStatus","showErrorMessage","error","alert","concat","message","handleInput1Change","e","target","value","handleInput2Change","checkProduct","result","parseInt","console","log","file","setFile","data","setData","fileRef","handleClick","current","click","handleChange","files","scanImage","className","children","type","onChange","onClick","ref","accept","src","URL","createObjectURL","alt"],"sources":["E:/Major Project/satish/M_project_blockchain/src/components/VerifyProduct.js"],"sourcesContent":["import React, {useState, useRef} from 'react'\r\n// import { Html5QrcodeScanner } from 'html5-qrcode';\r\n// import { useEffect } from 'react';\r\n// import QRCode from \"qrcode\";\r\nimport QrScanner from 'qr-scanner';\r\n\r\n// import QrReader from 'react-qr-reader';\r\n\r\n// import  { Component } from 'react';\r\n\r\n\r\n\r\nconst VerifyProduct = ({ provider, central }) => {\r\n\r\n    const [companyContractAddress, setCompanyContractAddress] = useState('');\r\n    const [productId, setProductId] = useState('');\r\n\r\n    const [productStatus, setProductStatus] = useState(null);\r\n\r\n\r\n    // const [showPopup, setShowPopup] = useState(false);\r\n\r\n\r\n    //const [scannedData, setScannedData] = useState(null);\r\n\r\n    // const handleScan = (data) => {\r\n    //     setScannedData(data);\r\n    // }\r\n\r\n    function showErrorMessage(error) {\r\n        alert(`An error occurred while connecting to MetaMask: ${error.message}`);\r\n    }\r\n\r\n    const handleInput1Change = (e) => {\r\n        setCompanyContractAddress(e.target.value);\r\n      };\r\n    \r\n      const handleInput2Change = (e) => {\r\n        setProductId(e.target.value);\r\n      };\r\n    \r\n\r\n\r\n    const checkProduct = async () => {\r\n        try{\r\n            debugger\r\n            const result = await central.checkProduct(companyContractAddress, parseInt(productId));\r\n            console.log(\"result\",result)\r\n            setProductStatus(result);\r\n        }catch(error){\r\n            console.log(error);\r\n            showErrorMessage(error);\r\n        }\r\n        \r\n    }\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [data, setData] = useState(null);\r\n    const fileRef =useRef();\r\n\r\n    const handleClick = () => {\r\n        fileRef.current.click();\r\n    };\r\n\r\n    const handleChange = async (e) => {\r\n        debugger\r\n        const file = e.target.files[0];\r\n        console.log(\"file\",file)\r\n        debugger\r\n        setFile(file);\r\n        const result = await QrScanner.scanImage(file);\r\n        setData(result);\r\n    };\r\n\r\n    // const showCounterfeitPopup = () => {\r\n    //     alert('The scanned product is counterfeit.');\r\n    // };\r\n\r\n\r\n    \r\n\r\n    return (\r\n        <div className='VerifyProduct'>\r\n            <h3 className='Component__title'>Verify Product</h3>\r\n            <div className='Component__form'>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Company contract address</label>\r\n                    <input type=\"text\" className='form__input' value={companyContractAddress} onChange={handleInput1Change} />\r\n                </div>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Product id</label>\r\n                    <input type=\"text\"  className='form__input' value={productId} onChange={handleInput2Change} />\r\n                </div>\r\n                \r\n          \r\n                <div className='form__content'>\r\n                    <h2 className='text-center mb-4'> Scan Your QR Code</h2>\r\n                    <div className='card border-0'>\r\n                        <div className=\"card-body\">\r\n                            <button type='button' onClick={handleClick} className='btn btn-success'>\r\n                                Scan QRCode\r\n                            </button>\r\n                            <input type=\"file\"\r\n                                ref = {fileRef}\r\n                                onChange={handleChange}\r\n                                accept=\".png, .jpg, .jpeg\" \r\n                                className='d-none' />\r\n                            <div className='mt-4'>\r\n                                {file && <img src={URL.createObjectURL(file)} alt=\"QR Code\" />}\r\n                                {data && <p className=\"small mt-5\">data: {data}</p>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* {scannedData ? <p>Scanned data: {scannedData}</p> : <QRScanner onScan={handleScan} />} */}\r\n                </div>\r\n\r\n                <button className='button__toggle form__button' onClick={checkProduct}>Verify</button>\r\n                {productStatus && <p>Result: {productStatus}</p>}\r\n\r\n\r\n            </div>\r\n\r\n            \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n//Extra\r\n\r\n// class QrContainer extends Component {\r\n//     constructor(props){\r\n//         super(props)\r\n//         this.state = {\r\n//             result: 'Hold QR Code Steady and Clear to scan',\r\n//         }\r\n//         this.handleScan = this.handleScan.bind(this)\r\n//     }\r\n//     handleScan(result){\r\n//         this.setState({\r\n//             result: \"data\"\r\n//         })\r\n//     }\r\n//     handleError(err){\r\n//         console.error(err)\r\n//     }\r\n//     render(){\r\n//         const previewStyle = {\r\n//             height: 200,\r\n//             width: 200,\r\n//             display: 'flex',\r\n//             \"justify-content\": \"center\"\r\n//         }\r\n//         const camStyle = {\r\n//             display: 'flex',\r\n//             justifyContent: \"center\",\r\n//             marginTop: '-50px'\r\n//         }\r\n\r\n//         const textStyle = {\r\n//             fontSize: '30px',\r\n//             \"text-align\": 'center',\r\n//             marginTop: '-50px'\r\n//         }\r\n\r\n//         return(\r\n//             <React.Fragment>\r\n//                 <div style={camStyle}>\r\n//                     <QrReader\r\n//                         delay={100}\r\n//                         style={previewStyle}\r\n//                         onError={this.handleError}\r\n//                         onScan={this.handleScan}\r\n//                         />\r\n//                 </div>\r\n//                 <p style={textStyle}>\r\n//                     {this.state.result}\r\n//                 </p>\r\n//             </React.Fragment>\r\n//         )\r\n//     }\r\n// }\r\n\r\nexport default VerifyProduct;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}