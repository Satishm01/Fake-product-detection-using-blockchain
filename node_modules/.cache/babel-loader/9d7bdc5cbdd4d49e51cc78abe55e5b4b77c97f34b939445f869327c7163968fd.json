{"ast":null,"code":"import{useState,useRef}from\"react\";import{QRCodeCanvas}from\"qrcode.react\";import'./app.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddProduct=_ref=>{let{account,central}=_ref;const[companyContractAddress,setCompanyContractAddress]=useState('');const[productId,setProductId]=useState('');const[manufactureId,setManufactureId]=useState('');const[productName,setProductName]=useState('');const[productBrand,setProductBrand]=useState('');const[loading,setLoading]=useState(false);const[updateStatus,setUpdateStatus]=useState(false);function showErrorMessage(error){setLoading(false);alert(\"An error occurred while connecting to MetaMask: \".concat(error.message));}const handleInput1Change=e=>{setCompanyContractAddress(e.target.value);};const handleInput2Change=e=>{setProductId(e.target.value);};const handleInput3Change=e=>{setManufactureId(e.target.value);};const handleInput4Change=e=>{setProductName(e.target.value);};const handleInput5Change=e=>{setProductBrand(e.target.value);};const[value,setUrl]=useState('');const qrRef=useRef();const downloadQRCode=e=>{e.preventDefault();let canvas=qrRef.current.querySelector(\"canvas\");let image=canvas.toDataURL(\"image/png\");let anchor=document.createElement(\"a\");anchor.href=image;anchor.download=\"qr-code.png\";document.body.appendChild(anchor);anchor.click();document.body.removeChild(anchor);setUrl(\"\");};const qrCodeEncoder=e=>{setUrl(e.target.value);};const qrcode=/*#__PURE__*/_jsx(QRCodeCanvas,{id:\"qrCode\",value:value,size:300,bgColor:\"#ffffff\",level:\"H\"});const addProducts=async()=>{try{const list=JSON.parse(\"[\"+productId+\"]\");if(account&&companyContractAddress&&list){setUpdateStatus(\"Validate the transaction through your wallet\");let transaction=await central.addproduct(account,companyContractAddress,list);setLoading(true);await transaction.wait();setUpdateStatus(\"Products Added\");setLoading(false);}else{throw Error('Please check that you are connected to a wallet,and that you have provided all the fields');}}catch(error){console.log(error);showErrorMessage(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"AddProduct\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Component__title\",children:\"Add Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Component__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Company contract address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:companyContractAddress,onChange:handleInput1Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Product id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:productId,onChange:handleInput2Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Manufacture id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:manufactureId,onChange:handleInput3Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:productName,onChange:handleInput4Change})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__content\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:\"Enter Product Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form__input\",value:productBrand,onChange:handleInput5Change})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button__toggle form__button\",onClick:addProducts,children:\"Add Product\"}),account?/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"Transaction in progress..... It can take a few minutes\"}):/*#__PURE__*/_jsx(\"p\",{children:updateStatus})}):/*#__PURE__*/_jsx(\"h2\",{children:\"Connect to a crypto wallet first.......\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qrcode__container\",children:[/*#__PURE__*/_jsx(\"div\",{ref:qrRef,children:qrcode}),/*#__PURE__*/_jsx(\"div\",{className:\"input__group\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:downloadQRCode,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Enter Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:value,onChange:qrCodeEncoder,placeholder:\"Address of Company\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!value,children:\"Download QR code\"})]})})]})]});};export default AddProduct;","map":{"version":3,"names":["useState","useRef","QRCodeCanvas","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddProduct","_ref","account","central","companyContractAddress","setCompanyContractAddress","productId","setProductId","manufactureId","setManufactureId","productName","setProductName","productBrand","setProductBrand","loading","setLoading","updateStatus","setUpdateStatus","showErrorMessage","error","alert","concat","message","handleInput1Change","e","target","value","handleInput2Change","handleInput3Change","handleInput4Change","handleInput5Change","setUrl","qrRef","downloadQRCode","preventDefault","canvas","current","querySelector","image","toDataURL","anchor","document","createElement","href","download","body","appendChild","click","removeChild","qrCodeEncoder","qrcode","id","size","bgColor","level","addProducts","list","JSON","parse","transaction","addproduct","wait","Error","console","log","className","children","type","onChange","onClick","ref","onSubmit","placeholder","disabled"],"sources":["E:/Major Project/satish/M_project_blockchain/src/components/AddProduct.js"],"sourcesContent":["import { useState, useRef } from \"react\";\r\nimport { QRCodeCanvas } from \"qrcode.react\";\r\nimport './app.css';\r\n\r\nconst AddProduct = ({account, central}) => {\r\n\r\n    const [companyContractAddress, setCompanyContractAddress] = useState('');\r\n    const [productId, setProductId] = useState('');\r\n    const [manufactureId, setManufactureId] = useState('');\r\n    const [productName, setProductName] = useState('');\r\n    const [productBrand, setProductBrand] = useState('');\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [updateStatus, setUpdateStatus] = useState(false);\r\n    \r\n    function showErrorMessage(error) {\r\n        setLoading(false);\r\n        alert(`An error occurred while connecting to MetaMask: ${error.message}`);\r\n    }\r\n\r\n    const handleInput1Change = (e) => {\r\n        setCompanyContractAddress(e.target.value);\r\n      };\r\n    \r\n      const handleInput2Change = (e) => {\r\n        setProductId(e.target.value);\r\n      };\r\n\r\n      const handleInput3Change = (e) => {\r\n        setManufactureId(e.target.value);\r\n      };\r\n\r\n      const handleInput4Change = (e) => {\r\n        setProductName(e.target.value);\r\n      };\r\n\r\n      const handleInput5Change = (e) => {\r\n        setProductBrand(e.target.value);\r\n      };\r\n\r\n\r\n    const [value, setUrl] = useState('');\r\n        const qrRef = useRef();\r\n        const downloadQRCode = (e) => {\r\n          e.preventDefault();\r\n          let canvas = qrRef.current.querySelector(\"canvas\");\r\n          let image = canvas.toDataURL(\"image/png\");\r\n          let anchor = document.createElement(\"a\");\r\n          anchor.href = image;\r\n          anchor.download = `qr-code.png`;\r\n          document.body.appendChild(anchor);\r\n          anchor.click();\r\n          document.body.removeChild(anchor);\r\n          setUrl(\"\");\r\n        };\r\n        const qrCodeEncoder = (e) => {\r\n          setUrl(e.target.value);\r\n        };\r\n      \r\n        const qrcode = (\r\n          <QRCodeCanvas\r\n            id=\"qrCode\"\r\n            value={value}\r\n            size={300}\r\n            bgColor={\"#ffffff\"}\r\n            level={\"H\"}\r\n          />\r\n        );\r\n\r\n\r\n    const addProducts = async () => {\r\n        try{\r\n            const list = JSON.parse(\"[\" + productId + \"]\");\r\n            if(account && companyContractAddress && list){\r\n                setUpdateStatus(\"Validate the transaction through your wallet\");\r\n                let transaction = await central.addproduct(account, companyContractAddress, list);\r\n                setLoading(true);\r\n                await transaction.wait();\r\n                setUpdateStatus(\"Products Added\");\r\n                setLoading(false);\r\n            }else{\r\n                throw Error('Please check that you are connected to a wallet,and that you have provided all the fields');\r\n            }\r\n        }catch(error){\r\n            console.log(error);\r\n            showErrorMessage(error);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n        \r\n\r\n\r\n    return (\r\n        <div className='AddProduct'>\r\n            <h3 className='Component__title'>Add Products</h3>\r\n            <div className='Component__form'>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Company contract address</label>\r\n                    <input type=\"text\" className='form__input' value={companyContractAddress} onChange={handleInput1Change} />\r\n                </div>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Product id</label>\r\n                    <input type=\"text\"  className='form__input' value={productId} onChange={handleInput2Change} />\r\n                </div>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Manufacture id</label>\r\n                    <input type=\"text\"  className='form__input' value={manufactureId} onChange={handleInput3Change} />\r\n                </div>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Product Name</label>\r\n                    <input type=\"text\"  className='form__input' value={productName} onChange={handleInput4Change} />\r\n                </div>\r\n                <div className='form__content'>\r\n                    <label className='form__label'>Enter Product Brand</label>\r\n                    <input type=\"text\"  className='form__input' value={productBrand} onChange={handleInput5Change} />\r\n                </div>\r\n                <button className='button__toggle form__button' onClick={addProducts}>Add Product</button>\r\n                { account ? (\r\n                    <>\r\n                        {loading  ? (\r\n                            <div>Transaction in progress..... It can take a few minutes</div>\r\n                        ) : ( \r\n                            <p>{updateStatus}</p>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    <h2>Connect to a crypto wallet first.......</h2>\r\n                )\r\n                \r\n                }\r\n            </div>\r\n\r\n            <div className=\"qrcode__container\">\r\n            <div ref={qrRef}>{qrcode}</div>\r\n            <div className=\"input__group\">\r\n                <form onSubmit={downloadQRCode}>\r\n                <label>Enter Address</label>\r\n                <input\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={qrCodeEncoder}\r\n                    placeholder=\"Address of Company\"\r\n                />\r\n                <button type=\"submit\" disabled={!value}>\r\n                    Download QR code\r\n                </button>\r\n                </form>\r\n            </div>\r\n            </div>    \r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default AddProduct;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}