{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DeployContract=_ref=>{let{account,central}=_ref;const[contractAddress,setContractAddress]=useState(null);const[loading,setLoading]=useState(false);const[updateStatus,setUpdateStatus]=useState(false);function showErrorMessage(error){setLoading(false);alert(\"An error occurred while connecting to MetaMask: \".concat(error.message));}const fetchContractAddress=async()=>{try{if(account){const address=await central.getCompanySmartContractAddress(account);setContractAddress(address);}else{throw Error('Please check that you are connected to a wallet');}}catch(error){showErrorMessage(error);}};const createContract=async()=>{try{if(account){setUpdateStatus(\"Validate the transaction through your wallet\");let transaction=await central.createSmartContract();setLoading(true);await transaction.wait();await fetchContractAddress();setUpdateStatus(\"Contract created \\n Address: \");setLoading(false);}else{throw Error('Please check that you are connected to a wallet');}}catch(error){setLoading(false);showErrorMessage(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"DeployContract\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Component__title\",children:\"Create My Contract\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button__toggle form__button\",onClick:createContract,children:\"Create Contract\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Transaction in progress... It can take a few minutes \"}):/*#__PURE__*/_jsxs(\"p\",{children:[updateStatus,contractAddress]})]});};export default DeployContract;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","DeployContract","_ref","account","central","contractAddress","setContractAddress","loading","setLoading","updateStatus","setUpdateStatus","showErrorMessage","error","alert","concat","message","fetchContractAddress","address","getCompanySmartContractAddress","Error","createContract","transaction","createSmartContract","wait","className","children","onClick"],"sources":["E:/Major Project/satish/M_project_blockchain/src/components/DeployContract.js"],"sourcesContent":["import React, {useState } from 'react'\r\n\r\nconst DeployContract = ({account, central}) => {\r\n\r\n    const [contractAddress, setContractAddress] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [updateStatus, setUpdateStatus] = useState(false);\r\n\r\n    function showErrorMessage(error) {\r\n        setLoading(false);\r\n        alert(`An error occurred while connecting to MetaMask: ${error.message}`);\r\n    }\r\n\r\n\r\n    const fetchContractAddress = async () => {\r\n        try{\r\n            if(account){\r\n                const address = await central.getCompanySmartContractAddress(account);\r\n                setContractAddress(address);\r\n            }else{\r\n                throw Error('Please check that you are connected to a wallet');\r\n            }\r\n        }catch(error){\r\n            showErrorMessage(error);\r\n        }\r\n    }\r\n\r\n\r\n    const createContract = async() =>{\r\n        try{\r\n            if(account){\r\n                setUpdateStatus(\"Validate the transaction through your wallet\");\r\n                let transaction = await central.createSmartContract();\r\n                setLoading(true);\r\n                await transaction.wait();\r\n                await fetchContractAddress();\r\n                setUpdateStatus(\"Contract created \\n Address: \");\r\n                setLoading(false);\r\n            }else{\r\n                throw Error('Please check that you are connected to a wallet');\r\n            }\r\n        }catch(error){\r\n            setLoading(false);\r\n            showErrorMessage(error);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    return (\r\n        <div className='DeployContract'>\r\n            <h3 className='Component__title'>Create My Contract</h3>\r\n            <button className='button__toggle form__button' onClick={createContract}>Create Contract</button>\r\n            {loading  ? (\r\n                <div>Transaction in progress... It can take a few minutes </div>\r\n                ) : ( \r\n                <p>{updateStatus}{contractAddress}</p>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DeployContract;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAQ,OAAO,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAwB,IAAvB,CAACC,OAAO,CAAEC,OAAO,CAAC,CAAAF,IAAA,CAEtC,KAAM,CAACG,eAAe,CAAEC,kBAAkB,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAACa,YAAY,CAAEC,eAAe,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAEvD,QAAS,CAAAe,gBAAgBA,CAACC,KAAK,CAAE,CAC7BJ,UAAU,CAAC,KAAK,CAAC,CACjBK,KAAK,oDAAAC,MAAA,CAAoDF,KAAK,CAACG,OAAO,CAAE,CAAC,CAC7E,CAGA,KAAM,CAAAC,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAG,CACC,GAAGb,OAAO,CAAC,CACP,KAAM,CAAAc,OAAO,CAAG,KAAM,CAAAb,OAAO,CAACc,8BAA8B,CAACf,OAAO,CAAC,CACrEG,kBAAkB,CAACW,OAAO,CAAC,CAC/B,CAAC,IAAI,CACD,KAAM,CAAAE,KAAK,CAAC,iDAAiD,CAAC,CAClE,CACJ,CAAC,MAAMP,KAAK,CAAC,CACTD,gBAAgB,CAACC,KAAK,CAAC,CAC3B,CACJ,CAAC,CAGD,KAAM,CAAAQ,cAAc,CAAG,KAAAA,CAAA,GAAU,CAC7B,GAAG,CACC,GAAGjB,OAAO,CAAC,CACPO,eAAe,CAAC,8CAA8C,CAAC,CAC/D,GAAI,CAAAW,WAAW,CAAG,KAAM,CAAAjB,OAAO,CAACkB,mBAAmB,CAAC,CAAC,CACrDd,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAa,WAAW,CAACE,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAP,oBAAoB,CAAC,CAAC,CAC5BN,eAAe,CAAC,+BAA+B,CAAC,CAChDF,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,IAAI,CACD,KAAM,CAAAW,KAAK,CAAC,iDAAiD,CAAC,CAClE,CACJ,CAAC,MAAMP,KAAK,CAAC,CACTJ,UAAU,CAAC,KAAK,CAAC,CACjBG,gBAAgB,CAACC,KAAK,CAAC,CAC3B,CAEJ,CAAC,CAGD,mBACIZ,KAAA,QAAKwB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3B3B,IAAA,OAAI0B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cACxD3B,IAAA,WAAQ0B,SAAS,CAAC,6BAA6B,CAACE,OAAO,CAAEN,cAAe,CAAAK,QAAA,CAAC,iBAAe,CAAQ,CAAC,CAChGlB,OAAO,cACJT,IAAA,QAAA2B,QAAA,CAAK,uDAAqD,CAAK,CAAC,cAEhEzB,KAAA,MAAAyB,QAAA,EAAIhB,YAAY,CAAEJ,eAAe,EAAI,CACxC,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAJ,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}